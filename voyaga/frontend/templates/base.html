<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}Voyaga ‚Äî Travel Reimagined{% endblock %}</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
{% load static %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%238B5CF6'/><text y='.9em' font-size='60' x='18' fill='white'>‚ú¶</text></svg>">
</head>
<body>

<nav class="navbar" id="navbar">
  <div class="nav-inner">
    <a href="/" class="logo">
      <div class="logo-orb"></div>
      <span class="logo-text">Voyaga</span>
    </a>
    <div class="nav-links">
      <a href="/" class="nav-link">Explore</a>
      <a href="/properties" class="nav-link">Stays</a>
      <a href="/about" class="nav-link">About</a>
      <a href="/list-property" class="nav-link">Host</a>
    </div>
    <div class="nav-actions" id="navActions">
      <button class="btn-ghost" onclick="showModal('loginModal')">Sign in</button>
      <button class="btn-primary" onclick="showModal('registerModal')">Join Free</button>
    </div>
    <div class="nav-user hidden" id="navUser">
      <!-- Notification Bell -->
      <div class="notif-bell" id="notifBell">
        <span class="bell-icon" onclick="toggleNotifications()">üîî</span>
        <span class="notif-badge hidden" id="notifBadge">0</span>
        <div class="notif-dropdown hidden" id="notifDropdown">
          <div class="notif-header">
            <span>Notifications</span>
            <button onclick="markAllRead(event)">Mark all read</button>
          </div>
          <div id="notifList"><div class="notif-empty">Loading...</div></div>
        </div>
      </div>
      <!-- User Avatar -->
      <div class="user-menu" id="userMenuBtn">
        <div class="avatar-circle" id="userAvatar" onclick="toggleDropdown()">G</div>
        <div class="user-dropdown" id="userDropdown">
          <a href="/dashboard">Dashboard</a>
          <a href="/bookings">My Bookings</a>
          <a href="/my-listings">My Listings</a>
          <a href="/profile">Profile</a>
          <a href="/list-property">List Property</a>
          <hr>
          <a href="mailto:help@voyaga.com">üí¨ Help & Support</a>
          <hr>
          <a href="#" onclick="logout()">Sign Out</a>
        </div>
      </div>
    </div>
  </div>
</nav>

<main id="appContent">
  {% block content %}{% endblock %}
</main>

<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-brand">
      <div class="footer-logo">
        <div class="logo-orb" style="width:28px;height:28px;"></div>
        <span style="font-size:1.2rem;font-weight:700;">Voyaga</span>
      </div>
      <p class="footer-tagline">Travel reimagined for the digital age. Book extraordinary stays around the world, powered by cryptocurrency.</p>
      <div class="footer-heart">Made with üíó by <strong>Team Voyaga(DE)</strong></div>
    </div>
    <div class="footer-links-group">
      <h4>Explore</h4>
      <a href="/properties">Browse Stays</a>
      <a href="/about">About Voyaga</a>
      <a href="/list-property">Become a Host</a>
      <a href="/my-listings">My Listings</a>
      <a href="/dashboard">Dashboard</a>
    </div>
    <div class="footer-links-group">
      <h4>Features</h4>
      <a href="/about">AI-Powered Matching</a>
      <a href="/about">Carbon Footprint Tracker</a>
      <a href="/about">Crypto Payments</a>
      <a href="/about">Verified Reviews</a>
    </div>
    <div class="footer-links-group">
      <h4>Support</h4>
      <a href="mailto:help@voyaga.com">üìß help@voyaga.com</a>
      <a href="#">FAQ</a>
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Service</a>
      <div class="helpline-box">
        <div class="helpline-title">Need help?</div>
        <a href="mailto:help@voyaga.com" class="helpline-email">help@voyaga.com</a>
        <div class="helpline-sub">We respond within 24 hours</div>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <span>¬© 2026 Voyaga ¬∑ Team Voyaga(DE) ¬∑ All rights reserved</span>
    <div class="footer-bottom-badges">
      <span class="footer-badge">üîê Blockchain Secured</span>
      <span class="footer-badge">üå± Carbon Tracked</span>
      <span class="footer-badge">ü§ñ AI Powered</span>
    </div>
  </div>
</footer>

<!-- Floating Help Button -->
<a href="mailto:help@voyaga.com" class="help-float" title="Contact Support ‚Äî help@voyaga.com">
  <span>üí¨</span>
  <span class="help-float-label">Help</span>
</a>

<!-- AI Chat Bubble -->
<div class="chat-bubble" id="chatBubble" onclick="toggleChat()">
  <div class="chat-bubble-ring"></div>
  <div class="chat-bubble-ring ring2"></div>
  <div class="ai-orb">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z" fill="currentColor" opacity="0.3"/>
      <circle cx="12" cy="12" r="3" fill="currentColor"/>
      <path d="M12 1 L12 4 M12 20 L12 23 M1 12 L4 12 M20 12 L23 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
  </div>
  <span class="chat-label">Voya AI</span>
</div>

<!-- AI Chat Panel -->
<div class="chat-panel hidden" id="chatPanel">
  <div class="chat-header">
    <div class="chat-ai-identity">
      <div class="chat-ai-orb">
        <div class="pulse-ring"></div>
        <div class="pulse-ring ring2"></div>
        <span>‚ú¶</span>
      </div>
      <div>
        <div class="chat-ai-name">Voya</div>
        <div class="chat-ai-status">AI Travel Assistant ¬∑ Online</div>
      </div>
    </div>
    <button onclick="toggleChat()" class="chat-close">‚úï</button>
  </div>
  <div class="chat-messages" id="chatMessages">
    <div class="chat-msg ai">
      <div class="msg-bubble">Hello! I'm <strong>Voya</strong>, your AI travel companion. I can help you discover perfect stays, plan your trip, or answer any questions. Where shall we go? ‚úàÔ∏è</div>
    </div>
  </div>
  <div class="chat-input-area">
    <div class="thinking-indicator hidden" id="thinkingIndicator">
      <span></span><span></span><span></span>
    </div>
    <div class="chat-input-row">
      <input type="text" id="chatInput" placeholder="Ask anything about travel..." onkeydown="if(event.key==='Enter')sendChat()">
      <button onclick="sendChat()" class="chat-send">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    <div class="chat-suggestions">
      <button onclick="quickChat('Find me a luxury villa')">üèñÔ∏è Luxury villas</button>
      <button onclick="quickChat('What are budget-friendly options?')">üí∞ Budget stays</button>
      <button onclick="quickChat('How does booking work?')">üìã How to book</button>
    </div>
  </div>
</div>

<!-- Login Modal -->
<div class="modal-overlay hidden" id="loginModal">
  <div class="modal">
    <button class="modal-close" onclick="hideModal('loginModal')">‚úï</button>
    <div class="modal-header">
      <div class="modal-logo">‚óà</div>
      <h2>Welcome Back</h2>
      <p>Sign in to your Voyaga account</p>
    </div>
    <form id="loginForm" onsubmit="handleLogin(event)">
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="loginEmail" required placeholder="your@email.com">
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      </div>
      <div id="loginError" class="form-error hidden"></div>
      <button type="submit" class="btn-primary w-full" id="loginBtn">Sign In</button>
    </form>
    <p class="modal-footer">No account? <a href="#" onclick="switchModal('loginModal','registerModal')">Join free ‚Üí</a></p>
  </div>
</div>

<!-- Register Modal -->
<div class="modal-overlay hidden" id="registerModal">
  <div class="modal">
    <button class="modal-close" onclick="hideModal('registerModal')">‚úï</button>
    <div class="modal-header">
      <div class="modal-logo">‚óà</div>
      <h2>Join Voyaga</h2>
      <p>Create your free account</p>
    </div>
    <form id="registerForm" onsubmit="handleRegister(event)">
      <div class="form-row">
        <div class="form-group">
          <label>First Name</label>
          <input type="text" id="regFirst" required placeholder="Jane">
        </div>
        <div class="form-group">
          <label>Last Name</label>
          <input type="text" id="regLast" required placeholder="Doe">
        </div>
      </div>
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="regUsername" required placeholder="janedoe">
      </div>
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="regEmail" required placeholder="your@email.com">
      </div>
      <div class="form-group">
        <label>I want to</label>
        <select id="regRole">
          <option value="guest">Book stays (Guest)</option>
          <option value="host">List my property (Host)</option>
        </select>
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="regPassword" required placeholder="Min. 8 characters" minlength="8">
      </div>
      <div class="form-group">
        <label>Confirm Password</label>
        <input type="password" id="regPassword2" required placeholder="Repeat password">
      </div>
      <div id="registerError" class="form-error hidden"></div>
      <div id="registerSuccess" class="form-success hidden"></div>
      <button type="submit" class="btn-primary w-full" id="registerBtn">Create Account</button>
    </form>
    <p class="modal-footer">Have an account? <a href="#" onclick="switchModal('registerModal','loginModal')">Sign in ‚Üí</a></p>
  </div>
</div>

<div class="toast hidden" id="toast"></div>
<script src="{% static 'js/app.js' %}"></script>
{% block scripts %}{% endblock %}

<style>
.notif-bell { position:relative; cursor:pointer; padding:6px 8px; border-radius:50%; transition:background 0.2s; margin-right:4px; display:flex; align-items:center; }
.notif-bell:hover { background:var(--surface2); }
.bell-icon { font-size:1.1rem; }
.notif-badge { position:absolute; top:-2px; right:-2px; min-width:16px; height:16px; background:#e74c3c; color:white; font-size:0.6rem; font-weight:700; border-radius:10px; display:flex; align-items:center; justify-content:center; padding:0 3px; }
.notif-dropdown { position:absolute; top:calc(100% + 10px); right:-10px; width:300px; background:var(--surface); border:1px solid var(--border); border-radius:14px; box-shadow:0 16px 48px rgba(0,0,0,0.5); z-index:1000; overflow:hidden; }
.notif-header { display:flex; justify-content:space-between; align-items:center; padding:12px 14px; border-bottom:1px solid var(--border); font-size:0.85rem; font-weight:600; }
.notif-header button { background:none; border:none; color:var(--gold); font-size:0.72rem; cursor:pointer; font-family:inherit; }
.notif-item { padding:10px 14px; border-bottom:1px solid rgba(255,255,255,0.05); cursor:pointer; transition:background 0.15s; }
.notif-item:hover { background:var(--surface2); }
.notif-item.unread { border-left:3px solid var(--gold); }
.notif-item-title { font-size:0.82rem; font-weight:600; margin-bottom:3px; }
.notif-item-msg { font-size:0.75rem; color:var(--text2); line-height:1.4; }
.notif-item-time { font-size:0.68rem; color:var(--text2); margin-top:4px; opacity:0.7; }
.notif-empty { padding:1.5rem; text-align:center; color:var(--text2); font-size:0.82rem; }
.help-float { position:fixed; bottom:100px; right:24px; background:var(--surface); border:1px solid var(--border); border-radius:24px; padding:8px 14px; display:flex; align-items:center; gap:6px; font-size:0.8rem; color:var(--text2); text-decoration:none; z-index:900; transition:all 0.2s; box-shadow:0 4px 16px rgba(0,0,0,0.3); }
.help-float:hover { border-color:var(--gold); color:var(--gold); transform:translateY(-2px); }
.helpline-box { margin-top:1rem; background:var(--bg2); border:1px solid var(--border); border-radius:10px; padding:10px 12px; }
.helpline-title { font-size:0.75rem; font-weight:700; margin-bottom:4px; }
.helpline-email { font-size:0.82rem; color:var(--gold); text-decoration:none; display:block; }
.helpline-email:hover { text-decoration:underline; }
.helpline-sub { font-size:0.7rem; color:var(--text2); margin-top:2px; }
.site-footer { background:var(--surface); border-top:1px solid var(--border); margin-top:4rem; }
.footer-inner { max-width:1200px; margin:0 auto; padding:3.5rem 2rem 2rem; display:grid; grid-template-columns:1.8fr 1fr 1fr 1fr; gap:2.5rem; }
.footer-brand .footer-logo { display:flex; align-items:center; gap:10px; margin-bottom:0.75rem; }
.footer-tagline { font-size:0.82rem; color:var(--text2); line-height:1.65; max-width:280px; margin-bottom:1rem; }
.footer-heart { font-size:0.82rem; color:var(--text2); background:var(--bg2); border:1px solid var(--border); border-radius:20px; display:inline-block; padding:5px 14px; }
.footer-links-group h4 { font-size:0.72rem; text-transform:uppercase; letter-spacing:0.1em; color:var(--gold); margin-bottom:1rem; }
.footer-links-group a { display:block; font-size:0.83rem; color:var(--text2); text-decoration:none; margin-bottom:0.5rem; transition:color 0.2s; }
.footer-links-group a:hover { color:var(--text); }
.footer-bottom { max-width:1200px; margin:0 auto; padding:1.2rem 2rem; border-top:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:0.75rem; font-size:0.75rem; color:var(--text2); }
.footer-bottom-badges { display:flex; gap:0.5rem; flex-wrap:wrap; }
.footer-badge { background:var(--bg2); border:1px solid var(--border); border-radius:14px; padding:3px 10px; font-size:0.72rem; }
@media (max-width:768px) { .footer-inner { grid-template-columns:1fr 1fr; } .footer-brand { grid-column:1/-1; } }
@media (max-width:480px) { .footer-inner { grid-template-columns:1fr; } }
</style>
</body>
</html>